// Generated by CoffeeScript 2.5.1
(function() {
  var callbackProperties, decorateElementClass, decorateElementPrototype, deprecate;

  ({deprecate} = require('grim'));

  if (global.__CUSTOM_HTML_ELEMENTS_CLASSES__ != null) {
    global.__ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__ = global.__CUSTOM_HTML_ELEMENTS_CLASSES__;
    delete global.__CUSTOM_HTML_ELEMENTS_CLASSES__;
  } else {
    if (global.__ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__ == null) {
      global.__ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__ = {};
    }
  }

  callbackProperties = ['createdCallback', 'attachedCallback', 'detachedCallback', 'attributeChangedCallback'];

  decorateElementPrototype = function(target, source) {
    callbackProperties.forEach(function(k) {
      return Object.defineProperty(target, k, {
        value: function() {
          var ref;
          return (ref = this[`__${k}`]) != null ? ref.apply(this, arguments) : void 0;
        },
        writable: true,
        enumerable: true,
        configurable: true
      });
    });
    return Object.getOwnPropertyNames(source).forEach(function(k) {
      var descriptor;
      if (k === 'constructor') {
        return;
      }
      descriptor = Object.getOwnPropertyDescriptor(source, k);
      if (callbackProperties.indexOf(k) > -1) {
        return Object.defineProperty(target, `__${k}`, descriptor);
      } else {
        return Object.defineProperty(target, k, descriptor);
      }
    });
  };

  decorateElementClass = function(target, source) {
    return Object.getOwnPropertyNames(source).forEach(function(k) {
      var descriptor;
      if (k === 'length' || k === 'name' || k === 'arguments' || k === 'caller' || k === 'prototype') {
        return;
      }
      descriptor = Object.getOwnPropertyDescriptor(source, k);
      return Object.defineProperty(target, k, descriptor);
    });
  };

  module.exports = function(nodeName, options) {
    var elementClass, elementPrototype, klass, proto, ref;
    ({
      class: klass
    } = options);
    if (klass != null) {
      proto = klass.prototype;
    } else {
      proto = (ref = options.prototype) != null ? ref : options;
    }
    if (proto === options) {
      deprecate('Using the prototype as the second argument is deprecated, use the prototype option instead');
    }
    if (__ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__[nodeName]) {
      elementClass = __ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__[nodeName];
      decorateElementPrototype(elementClass.prototype, proto);
      if (klass != null) {
        decorateElementClass(elementClass, klass);
      }
      return elementClass;
    } else {
      elementPrototype = Object.create(HTMLElement.prototype);
      decorateElementPrototype(elementPrototype, proto);
      elementClass = document.registerElement(nodeName, {
        prototype: Object.create(elementPrototype)
      });
      if (klass != null) {
        decorateElementClass(elementClass, klass);
      }
      return __ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__[nodeName] = elementClass;
    }
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVnaXN0ZXItb3ItdXBkYXRlLWVsZW1lbnQuanMiLCJzb3VyY2VSb290IjoiLi4iLCJzb3VyY2VzIjpbImxpYi9yZWdpc3Rlci1vci11cGRhdGUtZWxlbWVudC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQUEsTUFBQSxrQkFBQSxFQUFBLG9CQUFBLEVBQUEsd0JBQUEsRUFBQTs7RUFBQSxDQUFBLENBQUMsU0FBRCxDQUFBLEdBQWMsT0FBQSxDQUFRLE1BQVIsQ0FBZDs7RUFFQSxJQUFHLCtDQUFIO0lBQ0UsTUFBTSxDQUFDLHFDQUFQLEdBQStDLE1BQU0sQ0FBQztJQUN0RCxPQUFPLE1BQU0sQ0FBQyxpQ0FGaEI7R0FBQSxNQUFBOztNQUlFLE1BQU0sQ0FBQyx3Q0FBeUMsQ0FBQTtLQUpsRDs7O0VBTUEsa0JBQUEsR0FBcUIsQ0FDbkIsaUJBRG1CLEVBRW5CLGtCQUZtQixFQUduQixrQkFIbUIsRUFJbkIsMEJBSm1COztFQU9yQix3QkFBQSxHQUEyQixRQUFBLENBQUMsTUFBRCxFQUFTLE1BQVQsQ0FBQTtJQUN6QixrQkFBa0IsQ0FBQyxPQUFuQixDQUEyQixRQUFBLENBQUMsQ0FBRCxDQUFBO2FBQ3pCLE1BQU0sQ0FBQyxjQUFQLENBQXNCLE1BQXRCLEVBQThCLENBQTlCLEVBQWlDO1FBQy9CLEtBQUEsRUFBTyxRQUFBLENBQUEsQ0FBQTtBQUFFLGNBQUE7cURBQVksQ0FBRSxLQUFiLENBQW1CLElBQW5CLEVBQXlCLFNBQXpCO1FBQUgsQ0FEd0I7UUFFL0IsUUFBQSxFQUFVLElBRnFCO1FBRy9CLFVBQUEsRUFBWSxJQUhtQjtRQUkvQixZQUFBLEVBQWM7TUFKaUIsQ0FBakM7SUFEeUIsQ0FBM0I7V0FRQSxNQUFNLENBQUMsbUJBQVAsQ0FBMkIsTUFBM0IsQ0FBa0MsQ0FBQyxPQUFuQyxDQUEyQyxRQUFBLENBQUMsQ0FBRCxDQUFBO0FBQzdDLFVBQUE7TUFBSSxJQUFVLE1BQU0sYUFBaEI7QUFBQSxlQUFBOztNQUVBLFVBQUEsR0FBYSxNQUFNLENBQUMsd0JBQVAsQ0FBZ0MsTUFBaEMsRUFBd0MsQ0FBeEM7TUFDYixJQUFHLGtCQUFrQixDQUFDLE9BQW5CLENBQTJCLENBQTNCLENBQUEsR0FBZ0MsQ0FBQyxDQUFwQztlQUNFLE1BQU0sQ0FBQyxjQUFQLENBQXNCLE1BQXRCLEVBQThCLENBQUEsRUFBQSxDQUFBLENBQUssQ0FBTCxDQUFBLENBQTlCLEVBQXdDLFVBQXhDLEVBREY7T0FBQSxNQUFBO2VBR0UsTUFBTSxDQUFDLGNBQVAsQ0FBc0IsTUFBdEIsRUFBOEIsQ0FBOUIsRUFBaUMsVUFBakMsRUFIRjs7SUFKeUMsQ0FBM0M7RUFUeUI7O0VBa0IzQixvQkFBQSxHQUF1QixRQUFBLENBQUMsTUFBRCxFQUFTLE1BQVQsQ0FBQTtXQUNyQixNQUFNLENBQUMsbUJBQVAsQ0FBMkIsTUFBM0IsQ0FBa0MsQ0FBQyxPQUFuQyxDQUEyQyxRQUFBLENBQUMsQ0FBRCxDQUFBO0FBQzdDLFVBQUE7TUFBSSxJQUFVLE1BQU0sWUFBTixNQUFnQixVQUFoQixNQUF3QixlQUF4QixNQUFxQyxZQUFyQyxNQUErQyxXQUF6RDtBQUFBLGVBQUE7O01BRUEsVUFBQSxHQUFhLE1BQU0sQ0FBQyx3QkFBUCxDQUFnQyxNQUFoQyxFQUF3QyxDQUF4QzthQUNiLE1BQU0sQ0FBQyxjQUFQLENBQXNCLE1BQXRCLEVBQThCLENBQTlCLEVBQWlDLFVBQWpDO0lBSnlDLENBQTNDO0VBRHFCOztFQU92QixNQUFNLENBQUMsT0FBUCxHQUFpQixRQUFBLENBQUMsUUFBRCxFQUFXLE9BQVgsQ0FBQTtBQUNqQixRQUFBLFlBQUEsRUFBQSxnQkFBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUE7SUFBRSxDQUFBO01BQUMsS0FBQSxFQUFPO0lBQVIsQ0FBQSxHQUFpQixPQUFqQjtJQUNBLElBQUcsYUFBSDtNQUNFLEtBQUEsR0FBUSxLQUFLLENBQUMsVUFEaEI7S0FBQSxNQUFBO01BR0UsS0FBQSw2Q0FBNEIsUUFIOUI7O0lBS0EsSUFBRyxLQUFBLEtBQVMsT0FBWjtNQUNFLFNBQUEsQ0FBVSw0RkFBVixFQURGOztJQUlBLElBQUcscUNBQXFDLENBQUMsUUFBRCxDQUF4QztNQUNFLFlBQUEsR0FBZSxxQ0FBcUMsQ0FBQyxRQUFEO01BRXBELHdCQUFBLENBQXlCLFlBQVksQ0FBQyxTQUF0QyxFQUFpRCxLQUFqRDtNQUNBLElBQTZDLGFBQTdDO1FBQUEsb0JBQUEsQ0FBcUIsWUFBckIsRUFBbUMsS0FBbkMsRUFBQTs7YUFFQSxhQU5GO0tBQUEsTUFBQTtNQVFFLGdCQUFBLEdBQW1CLE1BQU0sQ0FBQyxNQUFQLENBQWMsV0FBVyxDQUFDLFNBQTFCO01BQ25CLHdCQUFBLENBQXlCLGdCQUF6QixFQUEyQyxLQUEzQztNQUVBLFlBQUEsR0FBZSxRQUFRLENBQUMsZUFBVCxDQUF5QixRQUF6QixFQUFtQztRQUFBLFNBQUEsRUFBVyxNQUFNLENBQUMsTUFBUCxDQUFjLGdCQUFkO01BQVgsQ0FBbkM7TUFFZixJQUE2QyxhQUE3QztRQUFBLG9CQUFBLENBQXFCLFlBQXJCLEVBQW1DLEtBQW5DLEVBQUE7O2FBRUEscUNBQXFDLENBQUMsUUFBRCxDQUFyQyxHQUFrRCxhQWZwRDs7RUFYZTtBQXhDakIiLCJzb3VyY2VzQ29udGVudCI6WyJ7ZGVwcmVjYXRlfSA9IHJlcXVpcmUgJ2dyaW0nXG5cbmlmIGdsb2JhbC5fX0NVU1RPTV9IVE1MX0VMRU1FTlRTX0NMQVNTRVNfXz9cbiAgZ2xvYmFsLl9fQVRPTV9VVElMU19DVVNUT01fRUxFTUVOVF9DTEFTU0VTX18gPSBnbG9iYWwuX19DVVNUT01fSFRNTF9FTEVNRU5UU19DTEFTU0VTX19cbiAgZGVsZXRlIGdsb2JhbC5fX0NVU1RPTV9IVE1MX0VMRU1FTlRTX0NMQVNTRVNfX1xuZWxzZVxuICBnbG9iYWwuX19BVE9NX1VUSUxTX0NVU1RPTV9FTEVNRU5UX0NMQVNTRVNfXyA/PSB7fVxuXG5jYWxsYmFja1Byb3BlcnRpZXMgPSBbXG4gICdjcmVhdGVkQ2FsbGJhY2snXG4gICdhdHRhY2hlZENhbGxiYWNrJ1xuICAnZGV0YWNoZWRDYWxsYmFjaydcbiAgJ2F0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjaydcbl1cblxuZGVjb3JhdGVFbGVtZW50UHJvdG90eXBlID0gKHRhcmdldCwgc291cmNlKSAtPlxuICBjYWxsYmFja1Byb3BlcnRpZXMuZm9yRWFjaCAoaykgLT5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkgdGFyZ2V0LCBrLCB7XG4gICAgICB2YWx1ZTogLT4gQFtcIl9fI3trfVwiXT8uYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH1cblxuICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhzb3VyY2UpLmZvckVhY2ggKGspIC0+XG4gICAgcmV0dXJuIGlmIGsgaW4gWydjb25zdHJ1Y3RvciddXG5cbiAgICBkZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGspXG4gICAgaWYgY2FsbGJhY2tQcm9wZXJ0aWVzLmluZGV4T2YoaykgPiAtMVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgXCJfXyN7a31cIiwgZGVzY3JpcHRvcilcbiAgICBlbHNlXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrLCBkZXNjcmlwdG9yKVxuXG5kZWNvcmF0ZUVsZW1lbnRDbGFzcyA9ICh0YXJnZXQsIHNvdXJjZSkgLT5cbiAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoc291cmNlKS5mb3JFYWNoIChrKSAtPlxuICAgIHJldHVybiBpZiBrIGluIFsnbGVuZ3RoJywgJ25hbWUnLCAnYXJndW1lbnRzJywgJ2NhbGxlcicsICdwcm90b3R5cGUnXVxuXG4gICAgZGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrKVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGssIGRlc2NyaXB0b3IpXG5cbm1vZHVsZS5leHBvcnRzID0gKG5vZGVOYW1lLCBvcHRpb25zKSAtPlxuICB7Y2xhc3M6IGtsYXNzfSA9IG9wdGlvbnNcbiAgaWYga2xhc3M/XG4gICAgcHJvdG8gPSBrbGFzcy5wcm90b3R5cGVcbiAgZWxzZVxuICAgIHByb3RvID0gb3B0aW9ucy5wcm90b3R5cGUgPyBvcHRpb25zXG5cbiAgaWYgcHJvdG8gaXMgb3B0aW9uc1xuICAgIGRlcHJlY2F0ZSgnVXNpbmcgdGhlIHByb3RvdHlwZSBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50IGlzIGRlcHJlY2F0ZWQsIHVzZSB0aGUgcHJvdG90eXBlIG9wdGlvbiBpbnN0ZWFkJylcblxuXG4gIGlmIF9fQVRPTV9VVElMU19DVVNUT01fRUxFTUVOVF9DTEFTU0VTX19bbm9kZU5hbWVdXG4gICAgZWxlbWVudENsYXNzID0gX19BVE9NX1VUSUxTX0NVU1RPTV9FTEVNRU5UX0NMQVNTRVNfX1tub2RlTmFtZV1cblxuICAgIGRlY29yYXRlRWxlbWVudFByb3RvdHlwZShlbGVtZW50Q2xhc3MucHJvdG90eXBlLCBwcm90bylcbiAgICBkZWNvcmF0ZUVsZW1lbnRDbGFzcyhlbGVtZW50Q2xhc3MsIGtsYXNzKSBpZiBrbGFzcz9cblxuICAgIGVsZW1lbnRDbGFzc1xuICBlbHNlXG4gICAgZWxlbWVudFByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSFRNTEVsZW1lbnQucHJvdG90eXBlKVxuICAgIGRlY29yYXRlRWxlbWVudFByb3RvdHlwZShlbGVtZW50UHJvdG90eXBlLCBwcm90bylcblxuICAgIGVsZW1lbnRDbGFzcyA9IGRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudCBub2RlTmFtZSwgcHJvdG90eXBlOiBPYmplY3QuY3JlYXRlKGVsZW1lbnRQcm90b3R5cGUpXG5cbiAgICBkZWNvcmF0ZUVsZW1lbnRDbGFzcyhlbGVtZW50Q2xhc3MsIGtsYXNzKSBpZiBrbGFzcz9cblxuICAgIF9fQVRPTV9VVElMU19DVVNUT01fRUxFTUVOVF9DTEFTU0VTX19bbm9kZU5hbWVdID0gZWxlbWVudENsYXNzXG4iXX0=
//# sourceURL=/home/runner/work/atom-utils-plus/atom-utils-plus/lib/register-or-update-element.coffee